(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1888:function(t,e,o){"use strict";o.r(e);var n=o("f128"),i=o("37c3");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("6722");var s,c=o("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"faa6103e",null,!1,n["a"],s);e["default"]=u.exports},"37c3":function(t,e,o){"use strict";o.r(e);var n=o("788d"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"43f0":function(t,e,o){"use strict";(function(t){o("a1fc");n(o("66fd"));var e=n(o("1888"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},6722:function(t,e,o){"use strict";var n=o("860d"),i=o.n(n);i.a},"788d":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("af50"),i={data:function(){return{isClient:!0,mobile:{phone:"",code:""},safety:{time:60,state:!1,interval:""},loginMobile:!1,phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,footInfo:{}}},watch:{mobile:{handler:function(t){this.phoneReg.test(t.phone)&&6===t.code.length?this.loginMobile=!0:this.loginMobile=!1},deep:!0}},onLoad:function(t){this.getFootConfig()},onShow:function(){this.safety.time=60,this.safety.state=!1,clearInterval(this.safety.interval)},methods:{getFootConfig:function(){var t=this;this.$http.getFootConfig({},(function(e){1==e.code?t.footInfo=e.data:t.$common.errorToShow(e.msg)}))},fnLogin:function(){var e=this;t.showLoading({title:"登陆中...",mask:!0}),this.$http.postMobilelogin({mobile:this.mobile.phone,captcha:this.mobile.code},(function(o){if(2==o.code)return t.showToast({title:o.msg,icon:"none"}),void setTimeout((function(){t.navigateTo({url:"/pages/login/authentication"})}),1e3);if(1!=o.code)e.$common.errorToShow(o.msg);else{t.hideLoading(),t.showToast({icon:"success",title:"登录成功"}),e.$db.set("userinfo",o.data.userinfo),e.$db.set("shopId",o.data.shopAuthenticationId);var n=o.data.shopFirst,i=o.data.shopStatus;setTimeout((function(){if(2==n)t.reLaunch({url:"/pages/shop/shopCenter"});else{var e=null;switch(i){case 0:e=2;break;case 1:e=1;break;case 2:e=0;break}t.navigateTo({url:"/pages/login/status?status=".concat(e)})}}),500)}}))},getPhoneNumber:function(e){var o=this;console.log("getPhoneNumber",e);var i=e.detail,a=i.errMsg,s=i.iv,c=i.encryptedData,u=t.getStorageSync("confirm_unionid")||"";"getPhoneNumber:ok"==a?(t.hideLoading(),n.checkSession().then((function(e){var n={code:e,iv:s,encryptedData:c,confirm_unionid:u};o.$http.getMobile(n,(function(e){1==e.code&&(t.showToast({title:"授权成功！"}),o.mobile.phone=e.data.mobile,t.hideLoading())})).catch((function(t){console.log(t)}))})).catch(console.log)):t.showToast({title:"手机号授权失败！",icon:"none"})},fnGetPhoneCode:function(){var e=this,o=this;this.phoneReg.test(this.mobile.phone)?t.showToast({title:"正在发送验证码",icon:"loading",success:function(){e.safety.state=!0,e.safety.interval=setInterval((function(){e.safety.time--<=0&&(e.safety.time=60,e.safety.state=!1,clearInterval(e.safety.interval))}),1e3),o.$http.postSendCode({mobile:o.mobile.phone},(function(e){console.log("发送验证码：",e),1==e.code?t.showToast({title:"发送成功",icon:"success"}):o.$common.errorToShow(e.msg)}))}}):t.showToast({title:"手机号不正确",icon:"none"})},switchAuthen:function(){t.navigateTo({url:"/pages/login/authentication"})}}};e.default=i}).call(this,o("543d")["default"])},"860d":function(t,e,o){},f128:function(t,e,o){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){!t.safety.state&&t.fnGetPhoneCode()})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))}},[["43f0","common/runtime","common/vendor"]]]);