(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/authentication"],{"11cc":function(e,t,n){},"5c1d":function(e,t,n){"use strict";n.r(t);var s=n("83fe"),i=n("e9ef");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("cbe5");var a,r=n("f0c5"),c=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"9885ce64",null,!1,s["a"],a);t["default"]=c.exports},7894:function(e,t,n){"use strict";(function(e){function n(e){return a(e)||o(e)||i(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function a(e){if(Array.isArray(e))return r(e)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={data:function(){return{activeSteps:1,disabledOne:!1,disabledTwo:!1,disabledThree:!1,stepsOne:{shopName:"",businessName:"",legalPerson:""},tempFilePaths:[],BusinessLicense:[],stepsThree:{userName:"",IDCard:"",phone:"",code:""},safety:{time:60,state:!1,interval:""},phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,cardReg:/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,shop_authentication_id:""}},onLoad:function(e){console.log("options",e),e.steps&&(this.activeSteps=e.steps),e.shopId&&(this.shop_authentication_id=e.shopId),this.$db.get("shopId")&&(this.shop_authentication_id=this.$db.get("shopId"))},watch:{stepsOne:{handler:function(e){e.shopName&&e.businessName&&e.legalPerson?this.disabledOne=!0:this.disabledOne=!1},deep:!0},BusinessLicense:{handler:function(e){this.disabledTwo=!!e}},stepsThree:{handler:function(e){e.userName&&this.cardReg.test(e.IDCard)&&this.phoneReg.test(e.phone)&&6===e.code.length?this.disabledThree=!0:this.disabledThree=!1},deep:!0}},methods:{nextSteps:function(){this.activeSteps++},idBlur:function(){this.cardReg.test(this.stepsThree.IDCard)||e.showToast({icon:"none",title:"身份证输入有误~"})},chooseImage:function(){var e=this;this.$http.uploadImage(1,(function(t,s){var i;(i=e.BusinessLicense).push.apply(i,n(s)),e.tempFilePaths.push(t.data.url)}))},delImage:function(t){var n=this;e.showModal({title:"删除照片",content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&(n.BusinessLicense=[],n.tempFilePaths=[])}})},previewImage:function(t){e.previewImage({urls:this.tempFilePaths,current:t.currentTarget.dataset.src})},fnGetPhoneCode:function(){var t=this;this.phoneReg.test(this.stepsThree.phone)?e.showToast({title:"正在发送验证码",icon:"loading",success:function(){t.safety.state=!0,t.safety.interval=setInterval((function(){t.safety.time--<=0&&(t.safety.time=60,t.safety.state=!1,clearInterval(t.safety.interval))}),1e3),t.$http.postSendCode({mobile:t.stepsThree.phone},(function(n){console.log("发送验证码：",n),1==n.code?e.showToast({title:"发送成功",icon:"success"}):t.$common.errorToShow(n.msg)}))}}):e.showToast({title:"手机号不正确",icon:"none"})},submit:function(){var t=this,n=this.$db.get("shop_id")||"";this.$http.postSaveShopUser({shop_id:n,shop_authentication_id:this.shop_authentication_id,shop_title:this.stepsOne.shopName,shop_name_full:this.stepsOne.businessName,legalname:this.stepsOne.legalPerson,license_image:this.tempFilePaths[0],mobile:this.stepsThree.phone,username:this.stepsThree.userName,card:this.stepsThree.IDCard,captcha:this.stepsThree.code},(function(n){1==n.code?e.reLaunch({url:"/pages/login/shopAuth?shopId=".concat(t.shop_authentication_id)}):t.$common.errorToShow(n.msg)}))}}};t.default=c}).call(this,n("543d")["default"])},"83fe":function(e,t,n){"use strict";var s,i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){!e.safety.state&&e.fnGetPhoneCode()})},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}))},"8c0f":function(e,t,n){"use strict";(function(e){n("a1fc");s(n("66fd"));var t=s(n("5c1d"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},cbe5:function(e,t,n){"use strict";var s=n("11cc"),i=n.n(s);i.a},e9ef:function(e,t,n){"use strict";n.r(t);var s=n("7894"),i=n.n(s);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o);t["default"]=i.a}},[["8c0f","common/runtime","common/vendor"]]]);