(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/authentication"],{3641:function(e,t,s){"use strict";s.r(t);var n=s("b848"),i=s.n(n);for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"38c5":function(e,t,s){"use strict";(function(e){s("b1d0");n(s("66fd"));var t=n(s("9b78"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])},"7a9e":function(e,t,s){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){!e.safety.state&&e.fnGetPhoneCode()})},o=[];s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return n}))},"9b78":function(e,t,s){"use strict";s.r(t);var n=s("7a9e"),i=s("3641");for(var o in i)"default"!==o&&function(e){s.d(t,e,(function(){return i[e]}))}(o);s("f560");var a,r=s("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"6d8fcd85",null,!1,n["a"],a);t["default"]=c.exports},b848:function(e,t,s){"use strict";(function(e){function s(e){return a(e)||o(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return r(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?r(e,t):void 0}}function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function a(e){if(Array.isArray(e))return r(e)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={data:function(){return{activeSteps:1,disabledOne:!1,disabledTwo:!1,disabledThree:!1,stepsOne:{shopName:"",businessName:"",legalPerson:""},stepsTwo:{tempFilePathsA:[],BusinessLicenseA:[],tempFilePathsB:[],BusinessLicenseB:[]},stepsThree:{userName:"",IDCard:"",phone:"",code:""},safety:{time:60,state:!1,interval:""},phoneReg:/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,cardReg:/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,shop_authentication_id:""}},onLoad:function(e){e.steps&&(this.activeSteps=e.steps),e.shopId&&(this.shop_authentication_id=e.shopId),this.$db.get("shopId")&&(this.shop_authentication_id=this.$db.get("shopId"))},watch:{stepsOne:{handler:function(e){e.shopName&&e.businessName&&e.legalPerson?this.disabledOne=!0:this.disabledOne=!1},deep:!0},stepsTwo:{handler:function(e){0!=e.BusinessLicenseA.length&&0!=e.BusinessLicenseB.length?this.disabledTwo=!0:this.disabledTwo=!1},deep:!0},stepsThree:{handler:function(e){e.userName&&this.cardReg.test(e.IDCard)&&this.phoneReg.test(e.phone)&&6===e.code.length?this.disabledThree=!0:this.disabledThree=!1},deep:!0}},methods:{nextSteps:function(){this.activeSteps++},idBlur:function(){this.cardReg.test(this.stepsThree.IDCard)||e.showToast({icon:"none",title:"身份证输入有误~"})},chooseImage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A";this.$http.uploadImage(1,(function(n,i){var o;if("A"===t)(o=e.stepsTwo.BusinessLicenseA).push.apply(o,s(i)),e.stepsTwo.tempFilePathsA.push(n.data.url);else if("B"===t){var a;(a=e.stepsTwo.BusinessLicenseB).push.apply(a,s(i)),e.stepsTwo.tempFilePathsB.push(n.data.url)}}))},delImage:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A";arguments.length>1&&arguments[1];e.showModal({title:"删除照片",content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&("A"===s?(t.stepsTwo.BusinessLicenseA=[],t.stepsTwo.tempFilePathsA=[]):"B"===s&&(t.stepsTwo.BusinessLicenseB=[],t.stepsTwo.tempFilePathsB=[]))}})},previewImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A",s=arguments.length>1?arguments[1]:void 0,n="";"A"===t?n=this.stepsTwo.BusinessLicenseA:"B"===t&&(n=this.stepsTwo.BusinessLicenseB),e.previewImage({urls:n,current:s.currentTarget.dataset.src})},fnGetPhoneCode:function(){var t=this;this.phoneReg.test(this.stepsThree.phone)?e.showToast({title:"正在发送验证码",icon:"loading",success:function(){t.safety.state=!0,t.safety.interval=setInterval((function(){t.safety.time--<=0&&(t.safety.time=60,t.safety.state=!1,clearInterval(t.safety.interval))}),1e3),t.$http.postSendCode({mobile:t.stepsThree.phone},(function(s){console.log("发送验证码：",s),1==s.code?e.showToast({title:"发送成功",icon:"success"}):t.$common.errorToShow(s.msg)}))}}):e.showToast({title:"手机号不正确",icon:"none"})},submit:function(){var t=this,s=this.$db.get("shop_id")||"";this.$http.postSaveShopUser({shop_id:s,shop_authentication_id:this.shop_authentication_id,shop_title:this.stepsOne.shopName,shop_name_full:this.stepsOne.businessName,legalname:this.stepsOne.legalPerson,license_image:this.stepsTwo.tempFilePathsA[0],shop_image_first:this.stepsTwo.tempFilePathsB[0],mobile:this.stepsThree.phone,username:this.stepsThree.userName,card:this.stepsThree.IDCard,captcha:this.stepsThree.code},(function(s){1==s.code?(e.reLaunch({url:"/pages/login/shopAuth?shopId=".concat(t.shop_authentication_id)}),e.hideHomeButton()):t.$common.errorToShow(s.msg)}))}}};t.default=c}).call(this,s("543d")["default"])},c70c:function(e,t,s){},f560:function(e,t,s){"use strict";var n=s("c70c"),i=s.n(n);i.a}},[["38c5","common/runtime","common/vendor"]]]);